# Processing pipeline for an experiment with 3 visual stimuli
A set of notebooks customized for an experiment with 3 visual stimuli : 2, 3, and 5 dots on the screen , separated by a blank screen.

Requires numan version 0.0.4, and vodex version 0.0.4 too ...
upgrade the packages if you have older versions with :
```
pip install --upgrade vodex
pip install --upgrade numan
```
Run these notebooks in order, read the comments :)

Notebooks 01, 02, 03 do the preprocessing and take a pretty long time to run .. the rest of the notebooks produces nice plots and cell masks...

Will create the following file structure :
```
processed
│   experiment.json <----------------------------------- (DONE in 01) the file that contains everything about the experiment, you are creating it once and will be reusing ever after
│   experiment_dff.json <------------------------------- (DONE in 01) everything about the experiment, but loads from the dff movie, not from the raw data
└───dff_movie  <---------------------------------------- (DONE in 01) the dff movie :)
│   │   dff_movie_0000.tif
│   │   dff_movie_0001.tif
│   │   ...
└───tscore_volumes  <----------------------------------- (DONE in 02) t-score tif files per pair
│   └───2v3
│       │   tscore_2v3.tif
│   └───3v5
│       │   tscore_3v5.tif
│   └───2v5
│       │   tscore_2v5.tif
│   └───2vB
│       │   tscore_2vB.tif
│   └───3vB
│       │   tscore_3vB.tif
│   └───5vB
│       │   tscore_5vB.tif
│   └───BvB
│       │   tscore_BvB1.tif
│       │   tscore_BvB2.tif
│       │   tscore_BvB3.tif
│       │   tscore_BvB4.tif
│       │   tscore_BvB5.tif
└───diff_volumes  <------------------------------------- (DONE in 02) absolute difference tif files per pair
│   └───2v3
│       │   diff_2v3.tif
│   └───3v5
│       │   diff_3v5.tif
│   └───...
└───spots
│   └───imaris  <--------------------------------------- (DONE after 02) ATTENTION : You need to put stuff generated by imaris into this folder!!!
│       │   └───tscore_2v3_Statistics
│       │       │     tscore_2v3_Position.csv
│       │       │     tscore_2v3_Diameter.csv
│       │       │     ...
│       │   └───tscore_3v5_Statistics
│       │       │     tscore_3v5_Position.csv
│       │       │     tscore_3v5_Diameter.csv
│       │       │     ...
│       │   └───tscore_2v5_Statistics
│       │       │     ...
│       │   └───...
│   └───signals  <-------------------------------------- (DONE in 03 and 04) json files with the extracted signals, also will have the group info after you added it
│       │   spots_2v3.json
│       │   spots_3v5.json
│       │   spots_2v5.json
│       │     ...
└───reports  <------------------------------------------ tiffs and pdf with the cells and signals found
│   └───all_significant  <------------------------------ tiffs and pdf with all significant cells per group
│       │   └───signals  <------------------------------ (DONE in 05) pdfs with signals
│       │       │     significant_2v3.pdf
│       │       │     significant_3v5.pdf
│       │       │     ...
│       │   └───images <-------------------------------- tif masks
│       │       │     significant_2v3.tif
│       │       │     significant_3v5.tif
│       │       │     ...
│   └───groupped  <------------------------------------- tiffs and pdf where the cells are groupped based on signal shape .. or anything else you want
│       │   readme.txt  <------------------------------- ATTENTION : you need to describe the groups
│       │   └───signals  <------------------------------ pdfs with signals
│       │       │     shape1_2v3.pdf
│       │       │     shape2_2v3.pdf
│       │       │     shape3_2v3.pdf
│       │       │     ...
│       │       │     shape1_3v5.pdf
│       │       │     shape2_3v5.pdf
│       │       │     shape3_3v5.pdf
│       │       │     ...
│       │   └───images  <------------------------------ tif masks
│       │       │     shape1_2v3.tif
│       │       │     shape2_2v3.tif
│       │       │     shape3_2v3.tif
│       │       │     ...
│       │       │     shape1_3v5.tif
│       │       │     shape2_3v5.tif
│       │       │     shape3_3v5.tif
│       │       │     ...
```
